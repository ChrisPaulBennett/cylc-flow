#!/usr/bin/python

import os, sys

from optparse import OptionParser
from registration import registrations

parser = OptionParser( usage = """cylc system-info [options] SYSTEM 

Retrieve the system-specific information about a registered system. This
command does not interact with a running system, it simply accesses the
'system_info' module in a system definition directory. The same
information can also be retrieved from a running system by 'cylc what-is'""")

(options, args) = parser.parse_args()

if len( args ) != 1:
    parser.error( "Wrong number of arguments!" )

name = args[0]

# find location of the system task and config modules
reg = registrations()
if reg.is_registered( name ):
    system_dir = reg.get( name )
    reg.print_reg( name )
else:
    reg.print_all()
    raise SystemExit( "System " + name + " not registered!" )

# prepend system Python modules to the python search path
sys.path.insert(0, system_dir )

# import system-specific help module
import system_info

# print system_specific information
print system_info.info
