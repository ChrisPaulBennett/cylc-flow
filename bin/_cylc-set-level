#!/usr/bin/python

import sys
from connectors import connect_to_control

usage = """cylc set-level [options] SYSTEM 

Change the logging verbosity level of a running system."""

connector = connect_to_control( usage )

vchoices = ['debug','info', 'warning', 'error', 'critical'] 
connector.parser.add_option( "-l", "--level",
        help="Logging level: " + ', '.join(vchoices),
        action="store", choices=vchoices, dest="verbosity" )

connector.parse_args()

if not connector.options.verbosity:
    connector.parser.error( "Logging level required." )

controller = connector.get_control()

controller.set_verbosity( connector.options.verbosity )
