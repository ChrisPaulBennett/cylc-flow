#!/usr/bin/python

#         __________________________
#         |____C_O_P_Y_R_I_G_H_T___|
#         |                        |
#         |  (c) NIWA, 2008-2010   |
#         | Contact: Hilary Oliver |
#         |  h.oliver@niwa.co.nz   |
#         |    +64-4-386 0461      |
#         |________________________|

import os
from connector import connector
from CylcOptionParsers import PromptOptionParser

parser = PromptOptionParser( """cylc lock [options] SYSTEM 

Lock a system to prevent inadvertant intervention via cylc commands.
This is not intended to prevent malicious intervention - anyone with
system access can unlock it with deliberate use of 'cylc unlock'. In
the future we may implement hard authentication of some kind, perhaps
using Pyro's built in security features.""" )

(options, args) = parser.parse_args()

if parser.prompt( 'Lock' ):
    god = connector( parser.get_pns_host(), parser.get_groupname(), 'remote' ).get()
    print god.lock( os.environ['USER'] )
