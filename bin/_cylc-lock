#!/usr/bin/python

#         __________________________
#         |____C_O_P_Y_R_I_G_H_T___|
#         |                        |
#         |  (c) NIWA, 2008-2010   |
#         | Contact: Hilary Oliver |
#         |  h.oliver@niwa.co.nz   |
#         |    +64-4-386 0461      |
#         |________________________|

import os
from connector import connector
from CylcOptionParsers import PromptOptionParser

parser = PromptOptionParser( """cylc lock [options] SYSTEM 

Only system's owner can intervene in its operation with cylc commands
such as stop, kill, purge, reset, etc., but there is still a risk of
making inadvertent changes to your own systems. You can use this command
to 'lock' important systems, preventing remote intervention via other
cylc commands. Locks have to be released by explicit invocation of 'cylc
unlock'.""" )

(options, args) = parser.parse_args()

if parser.prompt( 'Lock' ):
    god = connector( parser.get_pns_host(), parser.get_groupname(), 'remote' ).get()
    print god.lock( os.environ['USER'] )
