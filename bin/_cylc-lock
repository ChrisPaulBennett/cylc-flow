#!/usr/bin/python

#         __________________________
#         |____C_O_P_Y_R_I_G_H_T___|
#         |                        |
#         |  (c) NIWA, 2008-2010   |
#         | Contact: Hilary Oliver |
#         |  h.oliver@niwa.co.nz   |
#         |    +64-4-386 0461      |
#         |________________________|

import os
from connector import connector
from CylcOptionParsers import PromptOptionParser

parser = PromptOptionParser( """cylc lock [options] SYSTEM 

The owner of a system alone can intervene in its operation with cylc
commands such as stop, kill, purge, reset, etc. With this command you
can also guard against inadvertent intervention your own systems (when
using practice mode, for instance, lock the original system in case 
you accidentally target it instead of the practice one). Deliberate
use of 'cylc unlock' is required to regain control of a locked
system.""" )

(options, args) = parser.parse_args()

if parser.prompt( 'Lock' ):
    god = connector( parser.get_pns_host(), parser.get_groupname(), 'remote' ).get()
    print god.lock( os.environ['USER'] )
