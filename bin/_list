#!/usr/bin/env python

import os, sys
from optparse import OptionParser
from config import config, SuiteConfigError

parser = OptionParser( """cylc list [options] SUITE

Print the title, description, and task list, of a registered suite
(which does not need to be running). This command parses the 
suite.rc config file, which allows you to check the file's validity
without running the suite.""" )

parser.add_option( "-a", "--all", help="print all information "
        "(by default just the task list is printed).",
        action="store_true", default=False, dest="print_all" )

parser.add_option( "-o", "--owner", help="suite owner (default $USER).",
        metavar='USERNAME', action="store", default=os.environ['USER'], 
        dest="owner" )

(options, args) = parser.parse_args()

if len(args) != 1:
    parser.error( "Wrong number or arguments" )
else:
    suite = args[0]

try:
    config = config( suite )
except SuiteConfigError,x:
    raise SystemExit(x)

if options.print_all:
    print 'TITLE:'
    print config.get_title()
    print 'DESCRIPTION:'
    print config.get_description()
    print 'TASK LIST:'
for task in config.get_task_name_list():
    print ' ', task
