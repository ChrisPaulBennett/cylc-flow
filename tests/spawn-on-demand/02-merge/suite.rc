# foo.3 triggers a reflow at foo.1 and waits for it to catch up and merge.
[scheduling]
    cycling mode = integer
    initial cycle point = 1
    final cycle point = 3
    [[graph]]
        P1 = "foo[-P1] => foo => bar"
[runtime]
    [[foo]]
         script = """
if (( CYLC_TASK_CYCLE_POINT == 3 )); then
    cylc trigger --reflow ${CYLC_SUITE_NAME} foo.1
    cylc__job__poll_grep_suite_log merge
fi
         """
