
# THIS IS A SEQUENZ TASK CLASS DEFINITION FILE
#   (see template.def for more information)

%TASK_NAME
    foo

%VALID_REFERENCE_TIMES
    # list of comma separated hours
    6,18

%EXTERNAL_TASK
    # script to invoke when my prerequisites are all satisfied
    nztide.sh

%USER_PREFIX
    # external task runs as user PREFIX_(dvel|test|oper)
    sea_level

%PREREQUISITES
    # ZERO OR MORE prerequisite messages, each on a separate line.
    # May contain:
    #  1. $(CURRENT_REFERENCE_TIME)
    #  2. $(CURRENT_REFERENCE_TIME - HRS)

    # For requisites that depend on reference hour, prefix with
    # a comma-separated hour list followed by the '|' character.
    # (USE NO PREFIX FOR REQUISTES THAT APPLY IN ALL VALID HOURS).

    nzlam_12 finished for $(CURRENT_REFERENCE_TIME)
    0,12 | file met_$(CURRENT_REFERENCE_TIME)_utc.nc ready

%POSTREQUISITES
    # TWO OR MORE postrequisite messages, each on a separate line.
    # + Each must be prefixed by estimated completion time in minutes. 
    # May contain:
    #  1. $(TASK_NAME) 
    #  2. $(CURRENT_REFERENCE_TIME)
    #  3. $(CURRENT_REFERENCE_TIME - HRS)
    # Must at least include 'started' and 'finished' messages, e.g.:
    #   0  min: $(TASK_NAME) started for $(CURRENT_REFERENCE_TIME)
    #   10 min: $(TASK_NAME) finished for $(CURRENT_REFERENCE_TIME)

    # For postrequisites that depend on reference hour, see above.

    0 min: $(TASK_NAME) started for $(CURRENT_REFERENCE_TIME)
    0,12 | 1 min: file nztide_$(CURRENT_REFERENCE_TIME).nc ready
    6,18 | 1 min: file nztide_$(CURRENT_REFERENCE_TIME).nc ready
    2 min: $(TASK_NAME) finished for $(CURRENT_REFERENCE_TIME)

########## OPTIONAL KEYS FOLLOW

%DELAYED_DEATH
    # THIS KEY IS OPTIONAL, and defaults to 'False'. Most tasks have
    # only cotemporal downstream dependents and can therefore be killed
    # as soon as they are finished AND their reference time is older
    # than the oldest non-finished task.  Specify delayed death for any
    # tasks known to have downstream dependents in later reference
    # times, in which case they will be killed only when the cutoff time
    # specified by their dependents is reached.
    True

%EXPORT
    # specify environment variable names and values to passed to the
    # external task. (other than $REFERENCE_TIME and $TASK_NAME)
    FOO foo
    BAR bar
