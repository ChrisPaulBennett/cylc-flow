# THIS IS A CYLC TASK CLASS DEFINITION FILE

%TASK
    globalnwp_conv_wind, g_cw

%DESCRIPTION
    Converts the UM global 10m wind file to netcdf format.

%TYPE
    free

%OWNER
    ecoconnect

%HOURS
    0

%ENVIRONMENT
    SYS     ${USER##*_}
    HH      ${CYCLE_TIME:8:2}
    FILEIN qwqg${HH}_${CYCLE_TIME}_10mwind.gz 
    FILEIN_LOC  ${HOME}/output
    FILEOUT sls_${CYCLE_TIME}_utc_global_sfcwind.nc
    FILEOUT_LOC ${HOME}/output
    FILEATT attribute_sls_global.txt
    FILEATT_LOC /${SYS}/ecoconnect/wave_${SYS}/control/globalwave_120
    MULTIFILE 0
    GUNZIP  1
    UM2NC_O sls_
    UM2NC_P _global_sfcwind
    UM2NC_CT    ${CYCLE_TIME}
    OPTIONS -f -t -i
    FIELDS  All
    SERVICE globalnwp_conv_wind

%COMMAND
    cylc-wrapper um_conv_nc.sh
    
%PREREQUISITES
    "GLOBALWIND file ready for ${CYCLE_TIME}"

%OUTPUTS
    "SLS GLOBALWIND file available for ${CYCLE_TIME}"
