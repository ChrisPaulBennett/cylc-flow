# THIS IS A CYLC TASK CLASS DEFINITION FILE

%TASK
    ext_get_bgerr_ukmet, e_g_b_uk

%DESCRIPTION
    Get the UK MetOffice bgerr file

%TYPE
    free, sequential

%OWNER
    ecoconnect

%HOURS
    0,6,12,18

%ENVIRONMENT
    HH  ${CYCLE_TIME:8:2}
    SRCE    ftpops.metoffice.gov.uk
    SRCE_LOC    ~/
    DEST_LOC    ${HOME}/output
    FILENAME    qwq3${HH}.${CYCLE_TIME}.bgerr.gz
    SRCE_USER   niwa
    SERVICE     ext_get_bgerr_ukmet
    KEEP    1
    FAST    1
    FILEOUT qwq3${HH}_${CYCLE_TIME}_bgerr.gz
    TIMEOUT 45
    CHECKSUM    1
    CHECKFILE   ${CYCLE_TIME}_bgerr_checksum.txt

%COMMAND
    cylc-wrapper file_transfer_ftp.sh
                                
%PREREQUISITES
    "OPS bgerr file available for download for ${CYCLE_TIME}"

%OUTPUTS
    "OPS bgerr file downloaded for ${CYCLE_TIME}"
