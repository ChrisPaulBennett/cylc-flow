
%THIS FILE IS INCLUDED AUTOMATICALLY IN THE USERGUIDE LaTeX SOURCE
%DURING DOCUMENT PROCESSING

This system can be run in real or dummy mode; the resulting job 
schedules should be the same apart from small timing differences.
The task scripts invoked in real mode create zero-sized output files
with the \lstinline=touch= command, and input files are ``read'' by
simply detecting the file's existence.  All tasks read and write files
from a common location, for the sake of simplicity. 
See {\em Handling Real Dependencies}
(Section~\ref{HandlingRealDependencies}) for how to manage input and
output files in a more realistic system. 
The Unix 'sleep' command is used to get the trivial example tasks to
execute in the right amount of time (as defined in their taskdef files),
but scaled by \lstinline=$REAL_TIME_ACCEL= 
(defined in the system config module)
so that the system runs quickly even in real mode.
The system contains the following tasks:

\begin{itemize}
    \item {\bf A} - an atmospheric model, it depends on external real
        time obs and its own restart file.
    \item {\bf B} - a sea state model, it depends on outputs generated
        by A, and its own restart file.
    \item {\bf C} - a storm surge model, it depends on outputs generated
        by A, and its own restart file.
    \item {\bf D} - post processes outputs generated by B and C.
    \item {\bf E} - post processes outputs generated by B.
    \item {\bf F} - post processes outputs generated by C.
    \item {\bf X} - a {\em contact task} that gets the obs data required
    by A, at 1 hour past its cycle time. X has no prerequisites and
    therefore runs immediately when its contact time has passed.
\end{itemize}

There are also two additional tasks not mentioned in Section~\ref{HowCylcWorks}:

\begin{itemize}
    \item {\bf startup} - a oneoff task that cleans out the system
    workspace at startup.
    \item {\bf coldstart} - a oneoff task to provide initial restart
        inputs to the forecast models. 
\end{itemize}

Task F illustrates the use of cylc's {\em task wrapping} mechanism
(Section~\ref{TaskWrapping}) for running unmodified external tasks. 
The taskdef file ENVIRONMENT key is used to put the cycle time
into the task execution environment in the form expected by the wrapped
external task (\lstinline=$ANALYSIS_TIME= in this case). 

The \lstinline=$NEXT_CYCLE_TIME= and \lstinline=$NEXT_NEXT_CYCLE_TIME=
variables defined in the task definition files are used by the external
``forecast model'' tasks for their restart outputs (so that  
the minimalist task scripts can avoid doing their own cycle time
arithmetic).

To run the system follow the {\em Quick Start Guide}
(Section~\ref{QuickStartGuide}) from the `configure' step onward. 
{\em Be careful to set an initial cycle time in the past, in real mode,
or nothing will happen until until the start time is reached!}.

To understand what happens when the system starts up, see {\em
Understanding System Evolution}
(Section~\ref{UnderstandingSystemEvolution}).
