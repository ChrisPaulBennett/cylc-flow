# THIS IS A CYLC TASK DEFINITION FILE

#         __________________________
#         |____C_O_P_Y_R_I_G_H_T___|
#         |                        |
#         |  (c) NIWA, 2008-2010   |
#         | Contact: Hilary Oliver |
#         |  h.oliver@niwa.co.nz   |
#         |    +64-4-386 0461      |
#         |________________________|


%TASK
    TaskC, C

%DESCRIPTION
    Task C in the cylc userguide example system. Representing a storm
    surge model driven by the atmospheric model, it waits on surface
    pressure and wind inpupts and its own restart file, and generates
    restart files for the next two cycles.

%TYPE
    tied

%HOURS
    0,6,12,18

%COMMAND
    TaskC.sh -f -g $HOME ${CYCLE_TIME:8:2} $BAR $ONE $(cylcutil cycle-time --hour )

%ENVIRONMENT
    BAR bar
    BAZ baz
    FOO ${BAR##*_}$BAZ

%SCRIPTING
    export HR=${CYCLE_TIME:8:2}
    export HR2=$(cylcutil cycle-time --hour)

%PREREQUISITES
    "surface pressure field ready for $(CYCLE_TIME)"
    "surface wind fields ready for $(CYCLE_TIME)"

%N_RESTART_OUTPUTS
    2

%OUTPUTS
    "storm surge fields ready for $(CYCLE_TIME)"
