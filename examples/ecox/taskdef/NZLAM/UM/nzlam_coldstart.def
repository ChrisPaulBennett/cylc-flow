# THIS IS A CYLC TASK DEFINITION FILE

%TASK
    UM_nzlam_coldstart, nzlc

%DESCRIPTION
    NZLAM initial forecast from global model start dump.

%TYPE
    free, oneoff

%HOURS
    0,6,12,18

%OWNER
    nwp

%COMMAND
    UM-wrapper.sh

%ENVIRONMENT
    UMUI_JOBDIR   $COLDSTART_JOBDIR

%SCRIPTING
    export UM_STARTDUMP=$( cylcutil template -s 6 $TEMPLATE_RESTART_DUMP )
    export UM_PPVARFILE=$( cylcutil template -s 6 TEMPLATE_PPVAR_FILE   )
    export UM_PP7CXFILE=$( cylcutil template -s 6 TEMPLATE_PP7CX_FILE   )
    export UM_DATAMDIR=$(  cylcutil template -s 6 TEMPLATE_DATAM_DIR    )
    export UM_DATAWDIR=$(  cylcutil template -s 6 TEMPLATE_DATAW_DIR    )
    export UM_ALABCFILE=$( cylcutil template      TEMPLATE_ALABC_FILE   )
    export UM_LOGDIR=$(    cylcutil template      TEMPLATE_LOGFILE_DIR  )

%PREREQUISITES
    "Reconfigured NZLAM cold start dump ready for $(CYCLE_TIME)"
    "NZLAM LBC file ready for $(CYCLE_TIME)"

%OUTPUTS
    "OPS Cx background file ready for $(CYCLE_TIME)"
    "VAR LS background file ready for $(CYCLE_TIME)"
    "NZLAM restart dump ready for $(CYCLE_TIME)"
