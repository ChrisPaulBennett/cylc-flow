# THIS IS A CYLC TASK CLASS DEFINITION FILE

%TASK
    nzlam_conv_escape, nzlce

%DESCRIPTION
    Converts the NZLAM UM Energy Scape file to NetCDF format.

%TYPE
    free

%OWNER
    nwp

%HOURS
    0,6,12,18

%ENVIRONMENT
    SYS     ${USER##*_}
    FILEIN  escape_${CYCLE_TIME}_utc_nzlam_12*.um
    FILEIN_LOC  ${HOME}/output/nzlam_12
    FILEOUT escape_${CYCLE_TIME}_utc_nzlam_12*.nc
    FILEOUT_LOC ${HOME}/output/nzlam_12
    FILEATT attribute_escape_nzlam-12.txt
    FILEATT_LOC /${SYS}/ecoconnect/nwp_${SYS}/control/nzlam_12/netcdf-attr
    MULTIFILE 1
    GUNZIP  0
    UM2NC_O escape_
    UM2NC_P _nzlam_12
    UM2NC_CT    ${CYCLE_TIME}
    OPTIONS -f -t -i -c
    FIELDS  All 
    SERVICE nzlam_conv_escape

%COMMAND
    cylc-wrapper um_conv_nc.sh
    
%PREREQUISITES
    "ESCAPE UM files ready for ${CYCLE_TIME}"

%OUTPUTS
    "ESCAPE NC files ready for ${CYCLE_TIME}"
