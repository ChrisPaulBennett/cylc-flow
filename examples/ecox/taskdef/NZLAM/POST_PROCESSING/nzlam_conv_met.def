# THIS IS A CYLC TASK CLASS DEFINITION FILE

%TASK
    nzlam_conv_met, nzlcm

%DESCRIPTION
    Converts the NZLAM UM met file to NetCDF format.

%TYPE
    free

%OWNER
    nwp

%HOURS
    0,6,12,18

%ENVIRONMENT
    SYS     ${USER##*_}
    FILEIN  met_${CYCLE_TIME}_utc_nzlam_12_*.um
    FILEIN_LOC  ${HOME}/output/nzlam_12
    FILEOUT met_${CYCLE_TIME}_utc_nzlam_12_*.nc
    FILEOUT_LOC ${HOME}/output/nzlam_12
    FILEATT attribute_met_nzlam-12.txt
    FILEATT_LOC /${SYS}/ecoconnect/nwp_${SYS}/control/nzlam_12/netcdf-attr
    MULTIFILE   1
    GUNZIP  0
    UM2NC_O met_ 
    UM2NC_P _nzlam_12
    UM2NC_CT    ${CYCLE_TIME}
    OPTIONS -f -t -i -c
    FIELDS  23 24 33 409 3209 3210 3236 3245 3248 3281 3282 3283 4201 4203 5201 5205 5215 5216 5226 6203 8223 9203 9204 9205 9216 15229 15242 15243 15244 16202 16203 16222 16256
    SERVICE nzlam_conv_met

%COMMAND
    cylc-wrapper um_conv_nc.sh
    
%PREREQUISITES
    "MET UM files ready for ${CYCLE_TIME}"

%OUTPUTS
    "MET NC files ready for ${CYCLE_TIME}"
