# THIS IS A CYLC TASK DEFINITION FILE

%TASK
    ext_check_frames_ukmet, e_c_fr_uk

%DESCRIPTION
    Check if the UK MetOffice Frame checksum file is available on their ftp site

%TYPE
    free, contact

%CONTACT_DELAY
    -2.25 hr

%OWNER
    ecoconnect

%HOURS
    0,6,12,18

%ENVIRONMENT
    PREV_CYCLE_TIME  $( cylcutil cycle-time -s 6 )
    SRCE    ftpops.metoffice.gov.uk
    SRCE_LOC    ~/
    DEST_LOC    ${HOME}/output
    FILENAME    ${PREV_CYCLE_TIME}_frames_checksum.txt
    SRCE_USER   niwa
    SERVICE ext_check_frames_ukmet
    TIMEOUT 90

%COMMAND
    cylc-wrapper file_check_ftp.sh

%PREREQUISITES
    # NONE 

%OUTPUTS
    "UM global $(CYCLE_TIME-6) frame files available for download"
