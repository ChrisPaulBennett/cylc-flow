title = 'inheritance example'

description = """
This suite illustrates several tiers of task runtime inheritance.
To see the effect, examine task job scripts generated with the
'cylc util jobscript' command."""

[scheduling]
    initial cycle time = 2010080800
    final cycle time = 2010080900
    [[dependencies]]
        [[[0]]]
            graph = """
                foo => OPS
                OPS | OPS:fail => VAR => baz
                atovs => atovs_post
                """
[runtime]
    [[root]]
        [[[environment]]]
            ROOT = "the quick brown fox"
    [[GEN]]
        [[[environment]]]
            GEN_A = gen_a
            GEN_B = gen_b
    [[OPS]]
        inherit = GEN
        command scripting = "echo run-OPS.sh; sleep 10"
        [[[environment]]]
            GEN_B = ops_b
    [[VAR]]
        inherit = GEN
        command scripting = "echo run-VAR.sh; sleep 10"
        [[[environment]]]
            GEN_B = var_b
    [[atovs]]
        inherit = OPS
        [[[environment]]]
            OPS_DATA = atovs
    [[aircraft]]
        inherit = OPS
        command scripting = "echo HELLO from $TASK_ID; sleep 5; echo ABORT; /bin/false"
        [[[environment]]]
            OPS_DATA = aircraft
    [[ConLS]]
        inherit = VAR
        [[[environment]]]
            VAR_PROG = ConfigureLS
    [[AnPF]]
        inherit = VAR
        command scripting = "echo run-VAR.sh --apf; sleep 10"
        [[[environment]]]
            VAR_PROG = AnalysePF
    [[baz]]
    [[bar1,bar2]]
        inherit = baz

[visualization]
    collapsed families = OPS, VAR, baz
